{
  "audio_path": "data/chunks/best_codebase_architecture_for_ai_coding_and_ai_20250324_143507_chunk_010.mp3",
  "text": "interesting question and it's a question that a lot of us are asking more. Uh, what about the optimal architecture for building AI agents? Three code base structure stand out to me, atomic composable, vertical slice, and single file agents. We covered single file agents on the channel. What I want to do here is briefly walk through why I think these three structures are great if you're thinking about building out, um, AI agents. And it doesn't matter if you want to throw a framework on top of these, if you're using MCP, if you like anthropic agents or open AI agents or Gemini agents, that doesn't matter. This is all just structural. These structures work with every provider. Okay. So let me just highlight a couple of things here. If we hop into the Singapore agents code base and look at example agent architecture, let me show you what an agent architecture could look like for the atomic composable architecture. You can see that similar structure. I'm using the names, you know, as defined in the atomic structure, we have atoms, molecules, organisms, and then membranes. So let's start from the top. So the membrane is your main file, right? And so, you know, this is what we'll use to actually kick off this agent. It has a main down here. So, you know, we can pass an ARGs. This is also where, if you wanted to, you would build out, you know, um, MCP, right? So you could do something like this MCP agent, and now you have a command line interface and an MCP interface. Okay. So the membrane is quite literally, you know, the API layer. Okay. It defines all the ways you can interact with the system, right. With your atomic system. And then, you know, moving in to the, the actual, you know, content, um, we have the organism, right. And the organism here using our file agent example is our file agent, right? So the file agent then composes whatever it needs to from the molecules. It would compose the file reader, file writer, and then those files would compose the file tools, right? So you can see how this works top to bottom, right? The membrane is our access layer.",
  "segments": [
    {
      "id": 0,
      "avg_logprob": -0.32992225885391235,
      "compression_ratio": 1.7211155891418457,
      "end": 3.2799999713897705,
      "no_speech_prob": 0.10666221380233765,
      "seek": 0,
      "start": 0.0,
      "temperature": 0.0,
      "text": " interesting question and it's a question that a lot of us are asking more.",
      "tokens": [
        50364,
        1880,
        1168,
        293,
        309,
        311,
        257,
        1168,
        300,
        257,
        688,
        295,
        505,
        366,
        3365,
        544,
        13,
        50528
      ]
    },
    {
      "id": 1,
      "avg_logprob": -0.32992225885391235,
      "compression_ratio": 1.7211155891418457,
      "end": 7.480000019073486,
      "no_speech_prob": 0.10666221380233765,
      "seek": 0,
      "start": 3.440000057220459,
      "temperature": 0.0,
      "text": " Uh, what about the optimal architecture for building AI agents?",
      "tokens": [
        50536,
        4019,
        11,
        437,
        466,
        264,
        16252,
        9482,
        337,
        2390,
        7318,
        12554,
        30,
        50738
      ]
    },
    {
      "id": 2,
      "avg_logprob": -0.32992225885391235,
      "compression_ratio": 1.7211155891418457,
      "end": 11.520000457763672,
      "no_speech_prob": 0.10666221380233765,
      "seek": 0,
      "start": 7.519999980926514,
      "temperature": 0.0,
      "text": " Three code base structure stand out to me, atomic composable, vertical",
      "tokens": [
        50740,
        6244,
        3089,
        3096,
        3877,
        1463,
        484,
        281,
        385,
        11,
        22275,
        10199,
        712,
        11,
        9429,
        50940
      ]
    },
    {
      "id": 3,
      "avg_logprob": -0.32992225885391235,
      "compression_ratio": 1.7211155891418457,
      "end": 15.199999809265137,
      "no_speech_prob": 0.10666221380233765,
      "seek": 0,
      "start": 11.520000457763672,
      "temperature": 0.0,
      "text": " slice, and single file agents.",
      "tokens": [
        50940,
        13153,
        11,
        293,
        2167,
        3991,
        12554,
        13,
        51124
      ]
    },
    {
      "id": 4,
      "avg_logprob": -0.32992225885391235,
      "compression_ratio": 1.7211155891418457,
      "end": 17.479999542236328,
      "no_speech_prob": 0.10666221380233765,
      "seek": 0,
      "start": 15.199999809265137,
      "temperature": 0.0,
      "text": " We covered single file agents on the channel.",
      "tokens": [
        51124,
        492,
        5343,
        2167,
        3991,
        12554,
        322,
        264,
        2269,
        13,
        51238
      ]
    },
    {
      "id": 5,
      "avg_logprob": -0.32992225885391235,
      "compression_ratio": 1.7211155891418457,
      "end": 21.600000381469727,
      "no_speech_prob": 0.10666221380233765,
      "seek": 0,
      "start": 17.68000030517578,
      "temperature": 0.0,
      "text": " What I want to do here is briefly walk through why I think these three",
      "tokens": [
        51248,
        708,
        286,
        528,
        281,
        360,
        510,
        307,
        10515,
        1792,
        807,
        983,
        286,
        519,
        613,
        1045,
        51444
      ]
    },
    {
      "id": 6,
      "avg_logprob": -0.32992225885391235,
      "compression_ratio": 1.7211155891418457,
      "end": 27.719999313354492,
      "no_speech_prob": 0.10666221380233765,
      "seek": 0,
      "start": 21.600000381469727,
      "temperature": 0.0,
      "text": " structures are great if you're thinking about building out, um, AI agents.",
      "tokens": [
        51444,
        9227,
        366,
        869,
        498,
        291,
        434,
        1953,
        466,
        2390,
        484,
        11,
        1105,
        11,
        7318,
        12554,
        13,
        51750
      ]
    },
    {
      "id": 7,
      "avg_logprob": -0.27446478605270386,
      "compression_ratio": 1.7684563398361206,
      "end": 30.1200008392334,
      "no_speech_prob": 0.0025507379323244095,
      "seek": 2772,
      "start": 27.719999313354492,
      "temperature": 0.0,
      "text": " And it doesn't matter if you want to throw a framework on top of these,",
      "tokens": [
        50364,
        400,
        309,
        1177,
        380,
        1871,
        498,
        291,
        528,
        281,
        3507,
        257,
        8388,
        322,
        1192,
        295,
        613,
        11,
        50484
      ]
    },
    {
      "id": 8,
      "avg_logprob": -0.27446478605270386,
      "compression_ratio": 1.7684563398361206,
      "end": 34.279998779296875,
      "no_speech_prob": 0.0025507379323244095,
      "seek": 2772,
      "start": 30.1200008392334,
      "temperature": 0.0,
      "text": " if you're using MCP, if you like anthropic agents or open AI agents or",
      "tokens": [
        50484,
        498,
        291,
        434,
        1228,
        8797,
        47,
        11,
        498,
        291,
        411,
        22727,
        299,
        12554,
        420,
        1269,
        7318,
        12554,
        420,
        50692
      ]
    },
    {
      "id": 9,
      "avg_logprob": -0.27446478605270386,
      "compression_ratio": 1.7684563398361206,
      "end": 36.20000076293945,
      "no_speech_prob": 0.0025507379323244095,
      "seek": 2772,
      "start": 34.279998779296875,
      "temperature": 0.0,
      "text": " Gemini agents, that doesn't matter.",
      "tokens": [
        50692,
        22894,
        3812,
        12554,
        11,
        300,
        1177,
        380,
        1871,
        13,
        50788
      ]
    },
    {
      "id": 10,
      "avg_logprob": -0.27446478605270386,
      "compression_ratio": 1.7684563398361206,
      "end": 38.52000045776367,
      "no_speech_prob": 0.0025507379323244095,
      "seek": 2772,
      "start": 36.439998626708984,
      "temperature": 0.0,
      "text": " This is all just structural.",
      "tokens": [
        50800,
        639,
        307,
        439,
        445,
        15067,
        13,
        50904
      ]
    },
    {
      "id": 11,
      "avg_logprob": -0.27446478605270386,
      "compression_ratio": 1.7684563398361206,
      "end": 41.0,
      "no_speech_prob": 0.0025507379323244095,
      "seek": 2772,
      "start": 38.560001373291016,
      "temperature": 0.0,
      "text": " These structures work with every provider.",
      "tokens": [
        50906,
        1981,
        9227,
        589,
        365,
        633,
        12398,
        13,
        51028
      ]
    },
    {
      "id": 12,
      "avg_logprob": -0.27446478605270386,
      "compression_ratio": 1.7684563398361206,
      "end": 41.47999954223633,
      "no_speech_prob": 0.0025507379323244095,
      "seek": 2772,
      "start": 41.119998931884766,
      "temperature": 0.0,
      "text": " Okay.",
      "tokens": [
        51034,
        1033,
        13,
        51052
      ]
    },
    {
      "id": 13,
      "avg_logprob": -0.27446478605270386,
      "compression_ratio": 1.7684563398361206,
      "end": 43.880001068115234,
      "no_speech_prob": 0.0025507379323244095,
      "seek": 2772,
      "start": 41.599998474121094,
      "temperature": 0.0,
      "text": " So let me just highlight a couple of things here.",
      "tokens": [
        51058,
        407,
        718,
        385,
        445,
        5078,
        257,
        1916,
        295,
        721,
        510,
        13,
        51172
      ]
    },
    {
      "id": 14,
      "avg_logprob": -0.27446478605270386,
      "compression_ratio": 1.7684563398361206,
      "end": 47.880001068115234,
      "no_speech_prob": 0.0025507379323244095,
      "seek": 2772,
      "start": 43.91999816894531,
      "temperature": 0.0,
      "text": " If we hop into the Singapore agents code base and look at example agent",
      "tokens": [
        51174,
        759,
        321,
        3818,
        666,
        264,
        14491,
        12554,
        3089,
        3096,
        293,
        574,
        412,
        1365,
        9461,
        51372
      ]
    },
    {
      "id": 15,
      "avg_logprob": -0.27446478605270386,
      "compression_ratio": 1.7684563398361206,
      "end": 51.68000030517578,
      "no_speech_prob": 0.0025507379323244095,
      "seek": 2772,
      "start": 47.880001068115234,
      "temperature": 0.0,
      "text": " architecture, let me show you what an agent architecture could look like for",
      "tokens": [
        51372,
        9482,
        11,
        718,
        385,
        855,
        291,
        437,
        364,
        9461,
        9482,
        727,
        574,
        411,
        337,
        51562
      ]
    },
    {
      "id": 16,
      "avg_logprob": -0.27446478605270386,
      "compression_ratio": 1.7684563398361206,
      "end": 54.040000915527344,
      "no_speech_prob": 0.0025507379323244095,
      "seek": 2772,
      "start": 51.68000030517578,
      "temperature": 0.0,
      "text": " the atomic composable architecture.",
      "tokens": [
        51562,
        264,
        22275,
        10199,
        712,
        9482,
        13,
        51680
      ]
    },
    {
      "id": 17,
      "avg_logprob": -0.27446478605270386,
      "compression_ratio": 1.7684563398361206,
      "end": 55.560001373291016,
      "no_speech_prob": 0.0025507379323244095,
      "seek": 2772,
      "start": 54.119998931884766,
      "temperature": 0.0,
      "text": " You can see that similar structure.",
      "tokens": [
        51684,
        509,
        393,
        536,
        300,
        2531,
        3877,
        13,
        51756
      ]
    },
    {
      "id": 18,
      "avg_logprob": -0.21704931557178497,
      "compression_ratio": 1.7147886753082275,
      "end": 61.47999954223633,
      "no_speech_prob": 0.001477865967899561,
      "seek": 5556,
      "start": 55.79999923706055,
      "temperature": 0.0,
      "text": " I'm using the names, you know, as defined in the atomic structure, we have atoms,",
      "tokens": [
        50376,
        286,
        478,
        1228,
        264,
        5288,
        11,
        291,
        458,
        11,
        382,
        7642,
        294,
        264,
        22275,
        3877,
        11,
        321,
        362,
        16871,
        11,
        50660
      ]
    },
    {
      "id": 19,
      "avg_logprob": -0.21704931557178497,
      "compression_ratio": 1.7147886753082275,
      "end": 64.0,
      "no_speech_prob": 0.001477865967899561,
      "seek": 5556,
      "start": 61.47999954223633,
      "temperature": 0.0,
      "text": " molecules, organisms, and then membranes.",
      "tokens": [
        50660,
        13093,
        11,
        22110,
        11,
        293,
        550,
        15595,
        12779,
        13,
        50786
      ]
    },
    {
      "id": 20,
      "avg_logprob": -0.21704931557178497,
      "compression_ratio": 1.7147886753082275,
      "end": 65.08000183105469,
      "no_speech_prob": 0.001477865967899561,
      "seek": 5556,
      "start": 64.16000366210938,
      "temperature": 0.0,
      "text": " So let's start from the top.",
      "tokens": [
        50794,
        407,
        718,
        311,
        722,
        490,
        264,
        1192,
        13,
        50840
      ]
    },
    {
      "id": 21,
      "avg_logprob": -0.21704931557178497,
      "compression_ratio": 1.7147886753082275,
      "end": 68.04000091552734,
      "no_speech_prob": 0.001477865967899561,
      "seek": 5556,
      "start": 65.08000183105469,
      "temperature": 0.0,
      "text": " So the membrane is your main file, right?",
      "tokens": [
        50840,
        407,
        264,
        19651,
        307,
        428,
        2135,
        3991,
        11,
        558,
        30,
        50988
      ]
    },
    {
      "id": 22,
      "avg_logprob": -0.21704931557178497,
      "compression_ratio": 1.7147886753082275,
      "end": 71.95999908447266,
      "no_speech_prob": 0.001477865967899561,
      "seek": 5556,
      "start": 68.23999786376953,
      "temperature": 0.0,
      "text": " And so, you know, this is what we'll use to actually kick off this agent.",
      "tokens": [
        50998,
        400,
        370,
        11,
        291,
        458,
        11,
        341,
        307,
        437,
        321,
        603,
        764,
        281,
        767,
        4437,
        766,
        341,
        9461,
        13,
        51184
      ]
    },
    {
      "id": 23,
      "avg_logprob": -0.21704931557178497,
      "compression_ratio": 1.7147886753082275,
      "end": 74.4000015258789,
      "no_speech_prob": 0.001477865967899561,
      "seek": 5556,
      "start": 71.95999908447266,
      "temperature": 0.0,
      "text": " It has a main down here.",
      "tokens": [
        51184,
        467,
        575,
        257,
        2135,
        760,
        510,
        13,
        51306
      ]
    },
    {
      "id": 24,
      "avg_logprob": -0.21704931557178497,
      "compression_ratio": 1.7147886753082275,
      "end": 76.4000015258789,
      "no_speech_prob": 0.001477865967899561,
      "seek": 5556,
      "start": 74.5999984741211,
      "temperature": 0.0,
      "text": " So, you know, we can pass an ARGs.",
      "tokens": [
        51316,
        407,
        11,
        291,
        458,
        11,
        321,
        393,
        1320,
        364,
        8943,
        33715,
        13,
        51406
      ]
    },
    {
      "id": 25,
      "avg_logprob": -0.21704931557178497,
      "compression_ratio": 1.7147886753082275,
      "end": 81.63999938964844,
      "no_speech_prob": 0.001477865967899561,
      "seek": 5556,
      "start": 76.55999755859375,
      "temperature": 0.0,
      "text": " This is also where, if you wanted to, you would build out, you know, um, MCP, right?",
      "tokens": [
        51414,
        639,
        307,
        611,
        689,
        11,
        498,
        291,
        1415,
        281,
        11,
        291,
        576,
        1322,
        484,
        11,
        291,
        458,
        11,
        1105,
        11,
        8797,
        47,
        11,
        558,
        30,
        51668
      ]
    },
    {
      "id": 26,
      "avg_logprob": -0.21704931557178497,
      "compression_ratio": 1.7147886753082275,
      "end": 85.27999877929688,
      "no_speech_prob": 0.001477865967899561,
      "seek": 5556,
      "start": 81.63999938964844,
      "temperature": 0.0,
      "text": " So you could do something like this MCP agent, and now you have a command",
      "tokens": [
        51668,
        407,
        291,
        727,
        360,
        746,
        411,
        341,
        8797,
        47,
        9461,
        11,
        293,
        586,
        291,
        362,
        257,
        5622,
        51850
      ]
    },
    {
      "id": 27,
      "avg_logprob": -0.25928905606269836,
      "compression_ratio": 1.7260273694992065,
      "end": 88.63999938964844,
      "no_speech_prob": 0.002672869246453047,
      "seek": 8528,
      "start": 85.27999877929688,
      "temperature": 0.0,
      "text": " line interface and an MCP interface.",
      "tokens": [
        50364,
        1622,
        9226,
        293,
        364,
        8797,
        47,
        9226,
        13,
        50532
      ]
    },
    {
      "id": 28,
      "avg_logprob": -0.25928905606269836,
      "compression_ratio": 1.7260273694992065,
      "end": 89.16000366210938,
      "no_speech_prob": 0.002672869246453047,
      "seek": 8528,
      "start": 88.68000030517578,
      "temperature": 0.0,
      "text": " Okay.",
      "tokens": [
        50534,
        1033,
        13,
        50558
      ]
    },
    {
      "id": 29,
      "avg_logprob": -0.25928905606269836,
      "compression_ratio": 1.7260273694992065,
      "end": 92.5999984741211,
      "no_speech_prob": 0.002672869246453047,
      "seek": 8528,
      "start": 89.27999877929688,
      "temperature": 0.0,
      "text": " So the membrane is quite literally, you know, the API layer.",
      "tokens": [
        50564,
        407,
        264,
        19651,
        307,
        1596,
        3736,
        11,
        291,
        458,
        11,
        264,
        9362,
        4583,
        13,
        50730
      ]
    },
    {
      "id": 30,
      "avg_logprob": -0.25928905606269836,
      "compression_ratio": 1.7260273694992065,
      "end": 93.4000015258789,
      "no_speech_prob": 0.002672869246453047,
      "seek": 8528,
      "start": 92.91999816894531,
      "temperature": 0.0,
      "text": " Okay.",
      "tokens": [
        50746,
        1033,
        13,
        50770
      ]
    },
    {
      "id": 31,
      "avg_logprob": -0.25928905606269836,
      "compression_ratio": 1.7260273694992065,
      "end": 98.12000274658203,
      "no_speech_prob": 0.002672869246453047,
      "seek": 8528,
      "start": 93.5199966430664,
      "temperature": 0.0,
      "text": " It defines all the ways you can interact with the system, right.",
      "tokens": [
        50776,
        467,
        23122,
        439,
        264,
        2098,
        291,
        393,
        4648,
        365,
        264,
        1185,
        11,
        558,
        13,
        51006
      ]
    },
    {
      "id": 32,
      "avg_logprob": -0.25928905606269836,
      "compression_ratio": 1.7260273694992065,
      "end": 99.19999694824219,
      "no_speech_prob": 0.002672869246453047,
      "seek": 8528,
      "start": 98.12000274658203,
      "temperature": 0.0,
      "text": " With your atomic system.",
      "tokens": [
        51006,
        2022,
        428,
        22275,
        1185,
        13,
        51060
      ]
    },
    {
      "id": 33,
      "avg_logprob": -0.25928905606269836,
      "compression_ratio": 1.7260273694992065,
      "end": 103.83999633789062,
      "no_speech_prob": 0.002672869246453047,
      "seek": 8528,
      "start": 99.4800033569336,
      "temperature": 0.0,
      "text": " And then, you know, moving in to the, the actual, you know, content,",
      "tokens": [
        51074,
        400,
        550,
        11,
        291,
        458,
        11,
        2684,
        294,
        281,
        264,
        11,
        264,
        3539,
        11,
        291,
        458,
        11,
        2701,
        11,
        51292
      ]
    },
    {
      "id": 34,
      "avg_logprob": -0.25928905606269836,
      "compression_ratio": 1.7260273694992065,
      "end": 106.4000015258789,
      "no_speech_prob": 0.002672869246453047,
      "seek": 8528,
      "start": 104.23999786376953,
      "temperature": 0.0,
      "text": " um, we have the organism, right.",
      "tokens": [
        51312,
        1105,
        11,
        321,
        362,
        264,
        24128,
        11,
        558,
        13,
        51420
      ]
    },
    {
      "id": 35,
      "avg_logprob": -0.25928905606269836,
      "compression_ratio": 1.7260273694992065,
      "end": 111.95999908447266,
      "no_speech_prob": 0.002672869246453047,
      "seek": 8528,
      "start": 106.5999984741211,
      "temperature": 0.0,
      "text": " And the organism here using our file agent example is our file agent, right?",
      "tokens": [
        51430,
        400,
        264,
        24128,
        510,
        1228,
        527,
        3991,
        9461,
        1365,
        307,
        527,
        3991,
        9461,
        11,
        558,
        30,
        51698
      ]
    },
    {
      "id": 36,
      "avg_logprob": -0.2907605767250061,
      "compression_ratio": 1.6437499523162842,
      "end": 116.23999786376953,
      "no_speech_prob": 0.014061878435313702,
      "seek": 11196,
      "start": 111.95999908447266,
      "temperature": 0.0,
      "text": " So the file agent then composes whatever it needs to from the molecules.",
      "tokens": [
        50364,
        407,
        264,
        3991,
        9461,
        550,
        715,
        4201,
        2035,
        309,
        2203,
        281,
        490,
        264,
        13093,
        13,
        50578
      ]
    },
    {
      "id": 37,
      "avg_logprob": -0.2907605767250061,
      "compression_ratio": 1.6437499523162842,
      "end": 121.5199966430664,
      "no_speech_prob": 0.014061878435313702,
      "seek": 11196,
      "start": 116.44000244140625,
      "temperature": 0.0,
      "text": " It would compose the file reader, file writer, and then those",
      "tokens": [
        50588,
        467,
        576,
        35925,
        264,
        3991,
        15149,
        11,
        3991,
        9936,
        11,
        293,
        550,
        729,
        50842
      ]
    },
    {
      "id": 38,
      "avg_logprob": -0.2907605767250061,
      "compression_ratio": 1.6437499523162842,
      "end": 125.68000030517578,
      "no_speech_prob": 0.014061878435313702,
      "seek": 11196,
      "start": 121.5199966430664,
      "temperature": 0.0,
      "text": " files would compose the file tools, right?",
      "tokens": [
        50842,
        7098,
        576,
        35925,
        264,
        3991,
        3873,
        11,
        558,
        30,
        51050
      ]
    },
    {
      "id": 39,
      "avg_logprob": -0.2907605767250061,
      "compression_ratio": 1.6437499523162842,
      "end": 128.83999633789062,
      "no_speech_prob": 0.014061878435313702,
      "seek": 11196,
      "start": 125.80000305175781,
      "temperature": 0.0,
      "text": " So you can see how this works top to bottom, right?",
      "tokens": [
        51056,
        407,
        291,
        393,
        536,
        577,
        341,
        1985,
        1192,
        281,
        2767,
        11,
        558,
        30,
        51208
      ]
    },
    {
      "id": 40,
      "avg_logprob": -0.2907605767250061,
      "compression_ratio": 1.6437499523162842,
      "end": 130.9600067138672,
      "no_speech_prob": 0.014061878435313702,
      "seek": 11196,
      "start": 129.0800018310547,
      "temperature": 0.0,
      "text": " The membrane is our access layer.",
      "tokens": [
        51220,
        440,
        19651,
        307,
        527,
        2105,
        4583,
        13,
        51314
      ]
    }
  ],
  "language": "english",
  "duration": 131.05999755859375,
  "timestamp": 1742835212.687747
}